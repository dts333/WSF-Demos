<!DOCTYPE html>
<html>
<head>
<script src="https://cdn.plot.ly/plotly-latest.min.js" type="text/javascript"></script>
</head>
<body><style>body{max-width:800px;margin:50px auto;padding:0;background-color:#000;color:#fff;font-size:21px;font-family:sans-serif}.play-button{margin-top:1.5em;margin-bottom:1em;width:5em;font-size:15px}.slider-label{margin-right:1em;display:inline-block}.div-below-slider{padding-top:10px}.highlighted-text{color:#5df}.viz-canvas{padding-top:1em}.sci-num{padding-right:.15em}.eqn-left{text-align:right}.eqn-middle{padding-left:.25em;padding-right:.25em}.eqn-right{text-align:left}input[type=range]{-webkit-appearance:none;-moz-apperance:none;width:40%;height:8px;padding:0 0;background:#8b8f92;border-radius:2px;margin-top:25px;position:relative;bottom:4px}input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;-moz-apperance:none;width:25px;height:25px;-webkit-border-radius:20px;-moz-border-radius:20px;-ms-border-radius:20px;-o-border-radius:20px;border-radius:20px;background-image:-webkit-gradient(linear,left top,left bottom,color-stop(0,#fefefe),color-stop(.49,#d7d7d7),color-stop(.51,#d1d1d1),color-stop(1,#c8c8c8));border:1px solid #787878}input[type=range]::-moz-range-thumb{box-shadow:1px 1px 1px #000,0 0 1px #0d0d0d;border:1px solid #000;height:20px;width:20px;border-radius:20px;background:#fff;cursor:pointer}input[type=range]::-ms-thumb{box-shadow:1px 1px 1px #000,0 0 1px #0d0d0d;border:1px solid #000;height:20px;width:20px;border-radius:20px;background:#fff;cursor:pointer}body{color:#000;background-color:#fff}</style>
<div id="content"></div>
<span>
<label>
<span class="slider-label">
Temperature:
</span>
<input id="input-temp" name="input-temp" oninput="updateSelectedTemperatureIndex(this.value)" type="range"/>
</label>
</span>
<script type="text/javascript">function getData({f:e,rMax:t,dx:a,dy:r,nCircularLines:s,nRadialLines:n}){const o=[],i=Math.ceil(t/a)+1,l=Math.ceil(t/r)+1,c={x:[],y:[],z:[]};for(let t=-i;t<=i;++t){const s=t*a;c.x.push(s);const n=[];for(let a=-l;a<=l;++a){const i=a*r,l=e(s,i);o.push({x:s,y:i,z:l}),0===t&&c.y.push(i),n.push(l)}c.z.push(n)}const d=Math.PI/n,h=[];for(let a=0;a<n;++a){const r={x:[],y:[],z:[]},s=a*d;for(let a=-t;a<=t;a+=.05){const t=a*Math.cos(s),n=a*Math.sin(s);r.x.push(t),r.y.push(n),r.z.push(e(t,n))}h.push(r)}const p=t/s,u=[];for(let t=0;t<s;++t){const a={x:[],y:[],z:[]},r=p*t;for(let t=0;t<=2*Math.PI;t+=.05){const s=r*Math.cos(t),n=r*Math.sin(t);a.x.push(s),a.y.push(n),a.z.push(e(s,n))}u.push(a)}return{data:o,grid:c,radialLines:h,circularLines:u}}function getDataForTemp({temperature:e,lambda:t,rMax:a,dx:r,dy:s,nCircularLines:n,nRadialLines:o}){const i=e*e,l=getData({f:(e,a)=>{const r=e*e+a*a;return(1-i)*r+t*(r*r)},rMax:a,dx:r,dy:s,nCircularLines:n,nRadialLines:o}),c=l.data.filter(({y:e})=>0===e),d=l.grid,h=(i-1)/(2*t),p=i<1?0:Math.sqrt(h),u=Math.max(...c.filter(({x:e})=>Math.abs(e)>p).map(({z:e})=>e));for(let e=0;e<d.z.length;++e){const t=d.x[e],a=t*t,r=d.z[e];for(let e=0;e<r.length;++e){const s=d.y[e];(a+s*s>=h&&r[e]>u||t>0&&s>0)&&(r[e]=null)}}const m=l.radialLines,x=l.circularLines;for(const e of[m,x])for(const t of e)for(let e=0;e<t.x.length;++e){const a=t.x[e],r=t.y[e];a>0&&r>0&&(t.z[e]=null)}return{data2d:c,data3d:d,radialLines:m,circularLines:x}}const temperatures=[.5,1,1.5,2,2.5,3,3.5,4];function getGraphID(e){return`graph-${e}`}function makePlot({index:e,graphDiv:t,camera:a}){const r=[],s=temperatures[e],{data2d:n,data3d:o,radialLines:i,circularLines:l}=getDataForTemp({temperature:s,lambda:.5,rMax:5,dx:.15,dy:.15,nCircularLines:10,nRadialLines:12}),c={x:n.map(e=>e.x),y:n.map(e=>e.z),type:"line",showgrid:!1,showlegend:!1,xaxis:"x2",yaxis:"y2"},d={...o,type:"surface",showscale:!1,scene:"scene1",colorscale:[[0,"rgb(0.3,0.3,0.4)"],[1,"rgb(0.7,0.7,0.9)"]],contours:{x:{highlight:!1},y:{highlight:!1},z:{show:!1}}};r.push(c),r.push(d);for(const e of[...i,...l])r.push({type:"scatter3d",mode:"lines",...e,line:{color:"#ccc",width:2.5},showscale:!1,scene:"scene1"});void 0===a&&(a={up:{x:0,y:0,z:1},center:{x:0,y:0,z:0},eye:{x:-.6945026086643402,y:1.1301264956406285,z:.5748740996161328},projection:{type:"perspective"}}),console.log(a);const h={showlegend:!1,showgrid:!1,hovermode:!1,yaxis2:{anchor:"x2",domain:[0,1],showgrid:!1,visible:!1},xaxis2:{anchor:"y2",domain:[0,.5],showgrid:!1,visible:!1},scene1:{camera:a,domain:{x:[.5,1],y:[0,1]},xaxis:{showgrid:!1,visible:!1,showspikes:!1},yaxis:{showgrid:!1,visible:!1,showspikes:!1},zaxis:{showgrid:!1,visible:!1,showspikes:!1},margin:{t:0,b:0,l:0,r:0},hovermode:!1}};return Plotly.newPlot(t,r,h,{displayModeBar:!1}),{traces:r,layout:h}}const rootDiv=document.getElementById("content"),temperatureSlider=document.getElementById("input-temp");temperatureSlider.min=0,temperatureSlider.max=temperatures.length-1,temperatureSlider.step=1,temperatureSlider.value=0;let prevCamera=void 0;function updateSelectedTemperatureIndex(e){const t=getGraphID(e=void 0===e?0:+e);let a=document.getElementById(t);null===a&&((a=document.createElement("div")).id=t,a.class="graph",a.style.width="600px",a.style.height="400px",rootDiv.appendChild(a),makePlot({index:e,graphDiv:a}),a.on("plotly_relayout",()=>{prevCamera=a._fullLayout.scene._scene.getCamera()})),Plotly.relayout(a,{scene1:{camera:prevCamera}});for(let t=0;t<temperatures.length;++t){const a=getGraphID(t),r=document.getElementById(a);null!==r&&(r.style.display=t===e?"block":"none")}prevSelectedIndex=e}updateSelectedTemperatureIndex(0);</script></body>
</html>