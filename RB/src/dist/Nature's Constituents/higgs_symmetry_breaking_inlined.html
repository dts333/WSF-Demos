<!DOCTYPE html>
<html>
<head>
<script src="https://cdn.plot.ly/plotly-latest.min.js" type="text/javascript"></script>
</head>
<body><style>body{max-width:800px;margin:50px auto;padding:0;background-color:#000;color:#fff;font-size:21px;font-family:sans-serif}.play-button{margin-top:1.5em;margin-bottom:1em;width:5em;font-size:15px}.slider-label{margin-right:1em;display:inline-block}.div-below-slider{padding-top:10px}.highlighted-text{color:#5df}.viz-canvas{padding-top:1em}.sci-num{padding-right:.15em}.eqn-left{text-align:right}.eqn-middle{padding-left:.25em;padding-right:.25em}.eqn-right{text-align:left}input[type=range]{-webkit-appearance:none;-moz-apperance:none;width:40%;height:8px;padding:0 0;background:#8b8f92;border-radius:2px;margin-top:25px;position:relative;bottom:4px}input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;-moz-apperance:none;width:25px;height:25px;-webkit-border-radius:20px;-moz-border-radius:20px;-ms-border-radius:20px;-o-border-radius:20px;border-radius:20px;background-image:-webkit-gradient(linear,left top,left bottom,color-stop(0,#fefefe),color-stop(.49,#d7d7d7),color-stop(.51,#d1d1d1),color-stop(1,#c8c8c8));border:1px solid #787878}input[type=range]::-moz-range-thumb{box-shadow:1px 1px 1px #000,0 0 1px #0d0d0d;border:1px solid #000;height:20px;width:20px;border-radius:20px;background:#fff;cursor:pointer}input[type=range]::-ms-thumb{box-shadow:1px 1px 1px #000,0 0 1px #0d0d0d;border:1px solid #000;height:20px;width:20px;border-radius:20px;background:#fff;cursor:pointer}body{color:#000;background-color:#fff}</style>
<div id="content"></div>
<span>
<label>
<span class="slider-label">
Temperature:
</span>
<input id="input-temp" name="input-temp" oninput="updateSelectedTemperatureIndex(this.value)" type="range"/>
</label>
</span>
<script type="text/javascript">function getData({f:e,rMax:t,dx:a,dy:s,nCircularLines:r,nRadialLines:n}){const o=[],i=Math.ceil(2*t/a)+1,l=Math.ceil(2*t/s)+1,c={x:[],y:[],z:[]};for(let r=0;r<i;++r){const n=r*a-t;if(n>t)break;c.x.push(n);const i=[];for(let a=0;a<l;++a){const l=a*s-t;if(l>t)break;const d=e(n,l);o.push({x:n,y:l,z:d}),0===r&&c.y.push(l),i.push(d)}c.z.push(i)}const d=Math.PI/n,h=[];for(let a=0;a<n;++a){const s={x:[],y:[],z:[]},r=a*d;for(let a=-t;a<=t;a+=.05){const t=a*Math.cos(r),n=a*Math.sin(r);s.x.push(t),s.y.push(n),s.z.push(e(t,n))}h.push(s)}const u=t/r,p=[];for(let t=0;t<r;++t){const a={x:[],y:[],z:[]},s=u*t;for(let t=0;t<=2*Math.PI;t+=.05){const r=s*Math.cos(t),n=s*Math.sin(t);a.x.push(r),a.y.push(n),a.z.push(e(r,n))}p.push(a)}return{data:o,grid:c,radialLines:h,circularLines:p}}function getDataForTemp({temperature:e,lambda:t,rMax:a,dx:s,dy:r,nCircularLines:n,nRadialLines:o}){const i=e*e,l=getData({f:(e,a)=>{const s=e*e+a*a;return(1-i)*s+t*(s*s)},rMax:a,dx:s,dy:r,nCircularLines:n,nRadialLines:o});let c=Math.abs(l.data[0].y);for(const e of l.data){const t=Math.abs(e.y);t<c&&(c=t)}const d=l.data.filter(({y:e})=>e===c),h=l.grid,u=(i-1)/(2*t),p=i<1?0:Math.sqrt(u),m=Math.max(...d.filter(({x:e})=>Math.abs(e)>p).map(({z:e})=>e));for(let e=0;e<h.z.length;++e){const t=h.x[e],a=t*t,s=h.z[e];for(let e=0;e<s.length;++e){const r=h.y[e];(a+r*r>=u&&s[e]>m||t>0&&r>0)&&(s[e]=null)}}const x=l.radialLines,g=l.circularLines;for(const e of[x,g])for(const t of e)for(let e=0;e<t.x.length;++e){const a=t.x[e],s=t.y[e];a>0&&s>0&&(t.z[e]=null)}return{data2d:d,data3d:h,radialLines:x,circularLines:g}}const temperatures=[.5,1,1.5,2,2.5,3,3.5,4];function getGraphID(e){return`graph-${e}`}function makePlot({index:e,graphDiv:t}){const a=[],s=temperatures[e],{data2d:r,data3d:n,radialLines:o,circularLines:i}=getDataForTemp({temperature:s,lambda:.5,rMax:5,dx:.04,dy:.04,nCircularLines:10,nRadialLines:12}),l={x:r.map(e=>e.x),y:r.map(e=>e.z),type:"line",showgrid:!1,showlegend:!1,xaxis:"x2",yaxis:"y2"},c={...n,type:"surface",showscale:!1,scene:"scene1",colorscale:[[0,"rgb(0.3,0.3,0.4)"],[1,"rgb(0.7,0.7,0.9)"]],contours:{x:{highlight:!1},y:{highlight:!1},z:{show:!1}}};a.push(l),a.push(c);for(const e of[...o,...i])a.push({type:"scatter3d",mode:"lines",...e,line:{color:"#ccc",width:2},showscale:!1,scene:"scene1"});const d={showlegend:!1,showgrid:!1,hovermode:!1,yaxis2:{anchor:"x2",domain:[0,1],showgrid:!1,visible:!1},xaxis2:{anchor:"y2",domain:[0,.5],showgrid:!1,visible:!1},scene1:{camera:{eye:{x:1,y:1,z:.3}},domain:{x:[.5,1],y:[0,1]},xaxis:{showgrid:!1,visible:!1,showspikes:!1},yaxis:{showgrid:!1,visible:!1,showspikes:!1},zaxis:{showgrid:!1,visible:!1,showspikes:!1},margin:{t:0,b:0,l:0,r:0},hovermode:!1}};return console.log(a),Plotly.newPlot(t,a,d,{displayModeBar:!1}),{traces:a,layout:d}}const rootDiv=document.getElementById("content"),temperatureSlider=document.getElementById("input-temp");function updateSelectedTemperatureIndex(e){const t=getGraphID(e=void 0===e?0:+e);let a=document.getElementById(t);null===a&&((a=document.createElement("div")).id=t,a.class="graph",a.style.width="600px",a.style.height="400px",rootDiv.appendChild(a),makePlot({index:e,graphDiv:a}));for(let t=0;t<temperatures.length;++t){const a=getGraphID(t),s=document.getElementById(a);null!==s&&(s.style.display=t===e?"block":"none")}}temperatureSlider.min=0,temperatureSlider.max=temperatures.length-1,temperatureSlider.step=1,temperatureSlider.value=0,updateSelectedTemperatureIndex(0);</script></body>
</html>