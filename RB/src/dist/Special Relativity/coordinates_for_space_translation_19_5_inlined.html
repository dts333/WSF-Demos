<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<script src="https://d3js.org/d3.v5.min.js"></script>
</head>
<body><style>body{max-width:800px;margin:50px auto;padding:0;background-color:#000;color:#fff;font-size:21px;font-family:sans-serif}.play-button{margin-top:1.5em;margin-bottom:1em;width:5em;font-size:15px}.slider-label{margin-right:1em;display:inline-block}.div-below-slider{padding-top:10px}.highlighted-text{color:#5df}.viz-canvas{padding-top:1em}.sci-num{padding-right:.15em}.eqn-left{text-align:right}.eqn-middle{padding-left:.25em;padding-right:.25em}.eqn-right{text-align:left}.radio-label{padding-left:3px}input[type=radio]{position:relative;bottom:4px}input[type=range]{-webkit-appearance:none;-moz-apperance:none;width:40%;height:8px;padding:0 0;background:#8b8f92;border-radius:2px;margin-top:25px;position:relative;bottom:4px}input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;-moz-apperance:none;width:25px;height:25px;-webkit-border-radius:20px;-moz-border-radius:20px;-ms-border-radius:20px;-o-border-radius:20px;border-radius:20px;background-image:-webkit-gradient(linear,left top,left bottom,color-stop(0,#fefefe),color-stop(.49,#d7d7d7),color-stop(.51,#d1d1d1),color-stop(1,#c8c8c8));border:1px solid #787878}input[type=range]::-moz-range-thumb{box-shadow:1px 1px 1px #000,0 0 1px #0d0d0d;border:1px solid #000;height:20px;width:20px;border-radius:20px;background:#fff;cursor:pointer}input[type=range]::-ms-thumb{box-shadow:1px 1px 1px #000,0 0 1px #0d0d0d;border:1px solid #000;height:20px;width:20px;border-radius:20px;background:#fff;cursor:pointer}body{max-width:800px;margin:50px auto;padding:0;background-color:#000;color:#fff;font-size:21px;font-family:sans-serif}.play-button{margin-top:1.5em;margin-bottom:1em;width:5em;font-size:15px}.slider-label{margin-right:1em;display:inline-block}.div-below-slider{padding-top:10px}.highlighted-text{color:#5df}.viz-canvas{padding-top:1em}.sci-num{padding-right:.15em}.eqn-left{text-align:right}.eqn-middle{padding-left:.25em;padding-right:.25em}.eqn-right{text-align:left}.radio-label{padding-left:3px}input[type=radio]{position:relative;bottom:4px}input[type=range]{-webkit-appearance:none;-moz-apperance:none;width:40%;height:8px;padding:0 0;background:#8b8f92;border-radius:2px;margin-top:25px;position:relative;bottom:4px}input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;-moz-apperance:none;width:25px;height:25px;-webkit-border-radius:20px;-moz-border-radius:20px;-ms-border-radius:20px;-o-border-radius:20px;border-radius:20px;background-image:-webkit-gradient(linear,left top,left bottom,color-stop(0,#fefefe),color-stop(.49,#d7d7d7),color-stop(.51,#d1d1d1),color-stop(1,#c8c8c8));border:1px solid #787878}input[type=range]::-moz-range-thumb{box-shadow:1px 1px 1px #000,0 0 1px #0d0d0d;border:1px solid #000;height:20px;width:20px;border-radius:20px;background:#fff;cursor:pointer}input[type=range]::-ms-thumb{box-shadow:1px 1px 1px #000,0 0 1px #0d0d0d;border:1px solid #000;height:20px;width:20px;border-radius:20px;background:#fff;cursor:pointer}.slider-label-custom{text-align:right;min-width:11.2em}.h-centered{margin:auto;text-align:center}.text-div{display:inline;vertical-align:middle}.coordinate-box{display:inline-flex;flex-direction:column;padding-left:20px;height:400px}.primed-coord{color:#4f7}</style>
<div class="top-sliders-sect">
<span>
<label>
<span class="slider-label slider-label-custom">
ùë•-coordinate:
</span>
<input id="input-x-coord" name="input-x-coord" oninput="updateAngle({x: this.value, shouldDrawUprightLines: false})" type="range"/>
</label>
</span>
<br/>
<span>
<label>
<span class="slider-label slider-label-custom">
ùë¶-coordinate:
</span>
<input id="input-y-coord" name="input-y-coord" oninput="updateAngle({y: this.value, shouldDrawUprightLines: false})" type="range"/>
</label>
</span>
<br/>
<span>
<label>
<span class="slider-label slider-label-custom">
Horizontal displacement:
</span>
<input id="input-displacement-x" name="input-displacement-x" oninput="updateAngle({displacementX: this.value, shouldDrawUprightLines: false})" type="range"/>
</label>
</span>
</div>
<br/>
<div style="display: inline-block; vertical-align: bottom;">
<svg id="viz-canvas" style="margin: auto;" xmlns="http://www.w3.org/2000/svg"></svg>
</div>
<div class="coordinate-box">
<div style="height: 100px;"></div>
<div class="text-div" style="vertical-align: top;">
<span>ùë• = <span class="highlighted-text" id="text-upright-x"></span></span>
<br/>
<span>ùë¶ = <span class="highlighted-text" id="text-upright-y"></span></span>
<div style="height: 50px; flex-grow: 1;"></div>
<div class="text-div" style="vertical-align: bottom;">
<span><span class="primed-coord">ùë•‚Ä≤</span> =
<span class="highlighted-text" id="text-transformed-x"></span></span>
<br/>
<span><span class="primed-coord">ùë¶‚Ä≤</span> =
<span class="highlighted-text" id="text-transformed-y"></span></span>
</div>
<div style="height: 100px;"></div>
</div>
</div><script type="text/javascript">"use strict";const C=299792458;function isIterable(e){return null!=e&&"function"==typeof e[Symbol.iterator]}function applyDatum(e,{transition:t}={}){const a=d3.select(this).datum(e);void 0!==e.class&&a.classed(e.class,!0);const s=void 0===t?a:a.transition(t);Object.entries(e.attrs).forEach(([e,t])=>{s.attr(e,t)}),void 0!==e.text&&s.text(e.text)}function _addGraphicalObjs(e,t){return e.selectAll().data(t).enter().append(e=>d3.create(`svg:${e.shape}`).node()).each(applyDatum)}function applyGraphicalObjs(e,t,{selector:a,cssClass:s,transition:n}={}){const i=e.selectAll(a).data(t).join(e=>e.append(e=>d3.create(`svg:${e.shape}`).node())).each(function(e){applyDatum.call(this,e,{transition:n})});return void 0!==s&&i.classed(s,!0),i}function lorentzFactor({fracOfC:e}){return e||(e=0),1/Math.sqrt(1-e*e)}function sign(e,t){return void 0===t&&(t=1e-6),e<-t?-1:e<t?0:1}function l2Norm(...e){const t=e.reduce((e,t)=>e+t*t,0);return Math.sqrt(t)}const AESTHETIC={solidFill:"#4ff8",solidStroke:"#fff8",durationMSOfAnimationReset:300,easingForAnimationReset:d3.easePoly.exponent(2.5),configure:function(e,t){return Object.entries(t).forEach(([t,a])=>{if("attrs"===t){const t=a;Object.entries(t).forEach(([t,a])=>{e.attr(t,a)})}else{if("class"!==t)throw new Error(`Unexpected key ${t}`);e.classed(a,!0)}}),e}},RANGES={axis:{min:-20,max:20},angle:{min:-Math.PI,max:Math.PI,n:1001},displacement:{min:-5,max:5,n:1001}};(()=>{const e=RANGES.axis;e.mid=3*(e.max+e.min)/4,e.posDist=e.max-e.mid,e.negDist=e.mid-e.min,e.span=e.max-e.min})();const sliders={displacement:{}},MAX_DISPLACEMENT=5;["x","y"].forEach(e=>{const t=document.getElementById(`input-${e}-coord`);sliders[e]=t,t.min=-10,t.max=10,t.step=.001,t.value=0,sliders.displacement[e]=(()=>{const t=document.getElementById(`input-displacement-${e}`);return null!==t&&(t.min=-5,t.max=5,t.step=.001,t.value=0),t})()}),sliders.angle=(()=>{const e=document.getElementById("input-angle-rad");return null!==e&&(e.min=0,e.max=RANGES.angle.n-1,e.step=1,e.value=(RANGES.angle.n-1)/2),e})();const AXIS_MARGINS={top:.05,bottom:.05,left:(sliders.displacement.x,.2),right:null!==sliders.displacement.x?.2:.1},CANVAS_HEIGHT=400,CANVAS_WIDTH=400/(1-(AXIS_MARGINS.left+AXIS_MARGINS.right))*(1-(AXIS_MARGINS.top+AXIS_MARGINS.bottom)),CANVAS_BOUNDS={xMin:CANVAS_WIDTH*AXIS_MARGINS.left,xMax:CANVAS_WIDTH*(1-AXIS_MARGINS.right),yMin:400*(1-AXIS_MARGINS.bottom),yMax:400*AXIS_MARGINS.top},textSpans={angle:document.getElementById("text-angle"),upright:{x:document.getElementById("text-upright-x"),y:document.getElementById("text-upright-y")},transformed:{x:document.getElementById("text-transformed-x"),y:document.getElementById("text-transformed-y")}},primedAxesColor="#4f7",canvas=d3.select("#viz-canvas").attr("width",CANVAS_WIDTH).attr("height",400).attr("background-color","black"),ARROWHEAD_IDS={upright:"marker-arrowhead-upright",transformed:"marker-arrowhead-transformed"};(()=>{const e={attrs:{refX:4,refY:4,markerUnits:"strokeWidth",markerWidth:10,markerHeight:8,orient:"auto"}},t={attrs:{d:"M 0 0 L 10 4 L 0 8 L 4 4 z"}},a=canvas.append("svg:defs");[[ARROWHEAD_IDS.upright,"white"],[ARROWHEAD_IDS.transformed,primedAxesColor]].forEach(([s,n])=>{a.append("svg:marker").attr("id",s).each(function(){applyDatum.call(this,e)}).append("svg:path").each(function(){applyDatum.call(this,t)}).attr("stroke",n).attr("fill",n)})})();const subcanvases=canvas.data([{originX:0,originY:0,width:CANVAS_WIDTH,height:400}]).each(function(e){d3.select(this).append("g").attr("transform",`translate(0, ${e.originY})`).classed("subcanvas",!0)}).selectAll("g"),xScale=d3.scaleLinear().domain([RANGES.axis.min,RANGES.axis.max]).range([CANVAS_BOUNDS.xMin,CANVAS_BOUNDS.xMax]),yScale=d3.scaleLinear().domain([RANGES.axis.min,RANGES.axis.max]).range([CANVAS_BOUNDS.yMin,CANVAS_BOUNDS.yMax]);function getAngleFromIndex(e){if(void 0===e){if(null===sliders.angle)return 0;e=+sliders.angle.value}return-(RANGES.angle.min+e/(RANGES.angle.n-1)*(RANGES.angle.max-RANGES.angle.min))}const AXIS_LABEL_LOCS={xAx:{x:RANGES.axis.max,y:RANGES.axis.mid+.05*RANGES.axis.span},yAx:{x:RANGES.axis.mid+.05*RANGES.axis.span,y:RANGES.axis.max}};function drawGraph(){subcanvases.each(function(){const e=d3.select(this),t={stroke:"white","stroke-width":2,"marker-end":`url(#${ARROWHEAD_IDS.upright})`};e.selectAll().data([{shape:"line",class:"axis-x",attrs:{x1:xScale(RANGES.axis.min),x2:xScale(RANGES.axis.max),y1:yScale(RANGES.axis.mid),y2:yScale(RANGES.axis.mid),...t}},{shape:"line",class:"axis-y",attrs:{x1:xScale(RANGES.axis.mid),x2:xScale(RANGES.axis.mid),y1:yScale(RANGES.axis.min),y2:yScale(RANGES.axis.max),...t}}]).enter().append("svg:line").each(applyDatum),e.selectAll("text").data([{shape:"text",class:"axis-x-label",attrs:{x:xScale(AXIS_LABEL_LOCS.xAx.x),y:yScale(AXIS_LABEL_LOCS.xAx.y),fill:"white","text-anchor":"middle","dominant-baseline":"center"},text:"ùë•"},{shape:"text",class:"axis-y-label",attrs:{x:xScale(AXIS_LABEL_LOCS.yAx.x),y:yScale(AXIS_LABEL_LOCS.yAx.y),fill:"white","text-anchor":"middle","dominant-baseline":"center"},text:"ùë¶"}]).enter().append("svg:text").each(applyDatum).text(e=>e.text)})}function getLinesData({x:e,y:t,angleRad:a,displacementX:s,displacementY:n,shouldDrawUprightLines:i}){void 0===e&&(e=+sliders.x.value),void 0===t&&(t=+sliders.y.value),void 0===a&&(a=null===sliders.angle?0:+getAngleFromIndex(sliders.angle.value)),void 0===s&&(s=null===sliders.displacement.x?0:sliders.displacement.x.value),s=+s,void 0===n&&(n=null===sliders.displacement.y?0:+sliders.displacement.y.value),n=+n,void 0===i&&(i=!0);const l=Math.sin(a),r=Math.cos(a),x={"stroke-width":2,"marker-end":`url(#${ARROWHEAD_IDS.transformed})`},o={x:RANGES.axis.mid+s,y:RANGES.axis.mid+n},c={pos:{xAx:{x:RANGES.axis.posDist*r,y:RANGES.axis.posDist*l},yAx:{x:-RANGES.axis.posDist*l,y:RANGES.axis.posDist*r}},neg:{xAx:{x:RANGES.axis.negDist*r,y:RANGES.axis.negDist*l},yAx:{x:-RANGES.axis.negDist*l,y:RANGES.axis.negDist*r}}},d={};Object.entries(c.pos).forEach(([e,t])=>{d[e]={},Object.entries(t).forEach(([t,a])=>{d[e][t]=o[t]+a})});const A=[{shape:"line",class:"tf-axis-x",attrs:{x1:xScale(o.x-c.neg.xAx.x),y1:yScale(o.y-c.neg.xAx.y),x2:xScale(d.xAx.x),y2:yScale(d.xAx.y),...x,stroke:primedAxesColor}},{shape:"line",class:"tf-axis-y",attrs:{x1:xScale(o.x-c.neg.yAx.x),y1:yScale(o.y-c.neg.yAx.y),x2:xScale(d.yAx.x),y2:yScale(d.yAx.y),...x,stroke:primedAxesColor}}],S={stroke:"white","stroke-width":2,"stroke-dasharray":"5 5"},m=i?[{shape:"line",class:"upright-line-horizontal",attrs:{x1:xScale(RANGES.axis.mid),y1:yScale(t),x2:xScale(e),y2:yScale(t),...S}},{shape:"line",class:"upright-line-vertical",attrs:{x1:xScale(e),y1:yScale(RANGES.axis.mid),x2:xScale(e),y2:yScale(t),...S}}]:[],p={};Object.keys(d).forEach(a=>{const s=c.pos[a].x,n=c.pos[a].y,i=l2Norm(s,n),l=s/i,r=n/i,x=(e-o.x)*l+(t-o.y)*r;p[a]={},p[a].x=o.x+x*l,p[a].y=o.y+x*r,p[a].dotProd=x});const y={stroke:primedAxesColor,"stroke-width":2,"stroke-dasharray":"5 5"},u=[{shape:"line",class:"tf-line-vertical",attrs:{x1:xScale(p.xAx.x),y1:yScale(p.xAx.y),x2:xScale(e),y2:yScale(t),...y}},{shape:"line",class:"tf-line-horizontal",attrs:{x1:xScale(p.yAx.x),y1:yScale(p.yAx.y),x2:xScale(e),y2:yScale(t),...y}}],h=.05*RANGES.axis.span,g={fill:primedAxesColor},E=(e,t)=>{const a=1/(.07-.05)*(Math.min(...["xAx","yAx"].map(a=>{return l2Norm(e-AXIS_LABEL_LOCS[a].x,t-AXIS_LABEL_LOCS[a].y)/RANGES.axis.span}))-.05);return Math.max(0,Math.min(a,1))};return{data:[...m,...u,...A,...[(()=>{const e=d.xAx.x+h*-l,t=(()=>{const e=d.xAx.y+h*r;return r<0?e+h*r*.9:e})(),a=E(e,t);return{shape:"text",class:"tf-x-axis-label",attrs:{x:xScale(e),y:yScale(t),opacity:a,...g,"text-anchor":"middle","dominant-baseline":"center"},text:"ùë•‚Ä≤"}})(),(()=>{const e=d.yAx.x+h*r*1.2,t=(()=>{const e=d.yAx.y+h*l;return l<0?e+h*l*.9:e})(),a=E(e,t);return{shape:"text",class:"tf-y-axis-label",attrs:{x:xScale(e),y:yScale(t),opacity:a,...g,"text-anchor":"middle","dominant-baseline":"center"},text:"ùë¶‚Ä≤"}})()],{shape:"circle",class:"marked-point",attrs:{cx:xScale(e),cy:yScale(t),r:4,fill:"#fd0"}}],tfCoords:{xAxXCoord:p.xAx.dotProd,yAxYCoord:p.yAx.dotProd}}}function updateAngle({x:e,y:t,angleIndex:a,displacementX:s,displacementY:n,userInput:i=!0,shouldDrawUprightLines:l}={}){const r=getAngleFromIndex(a),{data:x,tfCoords:o}=getLinesData({x:e,y:t,angleRad:r,displacementX:s,displacementY:n,shouldDrawUprightLines:l});applyGraphicalObjs(subcanvases,()=>x,{selector:".graph-obj",cssClass:"graph-obj"}),textSpans.upright.x.textContent=(+sliders.x.value).toFixed(2),textSpans.upright.y.textContent=(+sliders.y.value).toFixed(2),textSpans.transformed.x.textContent=o.xAxXCoord.toFixed(2),textSpans.transformed.y.textContent=o.yAxYCoord.toFixed(2),i&&void 0===r||(textSpans.angle.textContent=(a===(RANGES.angle.n-1)/2?0:180*r/Math.PI).toFixed(2))}drawGraph(),updateAngle({angleRad:0,displacementX:0,displacementY:0,userInput:!1,shouldDrawUprightLines:null!==sliders.angle});</script></body>
</html>