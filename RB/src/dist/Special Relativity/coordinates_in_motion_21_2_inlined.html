<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<script src="https://d3js.org/d3.v5.min.js" type="text/javascript"></script>
</head>
<body><style>body{max-width:800px;margin:50px auto;padding:0;background-color:#000;color:#fff;font-size:21px;font-family:sans-serif}.play-button{margin-top:1.5em;margin-bottom:1em;width:5em;font-size:15px}.slider-label{margin-right:1em;display:inline-block}.div-below-slider{padding-top:10px}.highlighted-text{color:#5df}.viz-canvas{padding-top:1em}.sci-num{padding-right:.15em}.eqn-left{text-align:right}.eqn-middle{padding-left:.25em;padding-right:.25em}.eqn-right{text-align:left}.radio-label{padding-left:3px}input[type=radio]{position:relative;bottom:4px}input[type=range]{-webkit-appearance:none;-moz-apperance:none;width:40%;height:8px;padding:0 0;background:#8b8f92;border-radius:2px;margin-top:25px;position:relative;bottom:4px}input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;-moz-apperance:none;width:25px;height:25px;-webkit-border-radius:20px;-moz-border-radius:20px;-ms-border-radius:20px;-o-border-radius:20px;border-radius:20px;background-image:-webkit-gradient(linear,left top,left bottom,color-stop(0,#fefefe),color-stop(.49,#d7d7d7),color-stop(.51,#d1d1d1),color-stop(1,#c8c8c8));border:1px solid #787878}input[type=range]::-moz-range-thumb{box-shadow:1px 1px 1px #000,0 0 1px #0d0d0d;border:1px solid #000;height:20px;width:20px;border-radius:20px;background:#fff;cursor:pointer}input[type=range]::-ms-thumb{box-shadow:1px 1px 1px #000,0 0 1px #0d0d0d;border:1px solid #000;height:20px;width:20px;border-radius:20px;background:#fff;cursor:pointer}.slider-label-custom{min-width:8em;text-align:right}.viz-canvas{padding-top:5px}.frame-title-section{text-align:center}.frame-title{margin:0 auto;font-size:120%}.float-right{float:right;margin-right:100px}.float-left{float:left;margin-left:100px}.hidden{visibility:hidden}</style>
<div class="top-sliders-sect">
<span>
<label>
<span class="slider-label slider-label-custom">
Reference frame:
</span>
<label>
<input id="input-ref-frame-a" name="input-ref-frame" onchange="updateClocks({referenceFrame: this.value})" type="radio" value="a"/><span class="radio-label">A</span></label>
<span style="padding-left: 5px; padding-right: 5px;"></span>
<label>
<input checked="" id="input-ref-frame-b" name="input-ref-frame" onchange="updateClocks({referenceFrame: this.value})" type="radio" value="b"/><span class="radio-label">B</span></label>
</label>
</span>
<br/>
<span>
<label>
<span class="slider-label slider-label-custom">
𝑣:
</span>
<input id="input-speed" max=".99" min="0" name="input-speed" oninput="updateClocks({fracOfC: this.value})" step=".01" type="range" value="0"/>
</label>
</span>
</div>
<br/>
<div class="frame-title-section">
<span class="float-left hidden">𝑣 =
<span class="highlighted-text sci-num frame-a-speed-placeholder">100</span>𝑐</span>
<span class="frame-title">Frame A —
<span class="highlighted-text" id="frame-a-moving-text">At Rest</span></span>
<span class="float-right" id="frame-a-speed" style="visibility: hidden;">𝑣 =
<span class="highlighted-text sci-num frame-a-speed-placeholder">100</span>𝑐</span>
</div>
<svg class="viz-canvas" id="svg-frame-a"></svg>
<div style="height: 50px;"></div>
<div class="frame-title-section">
<span class="float-left" id="frame-b-speed" style="visibility: hidden;">𝑣 =
<span class="highlighted-text sci-num frame-b-speed-placeholder">100</span>𝑐</span>
<span class="frame-title">Frame B —
<span class="highlighted-text" id="frame-b-moving-text">Moving</span></span>
<span class="float-right hidden">𝑣 =
<span class="highlighted-text sci-num frame-b-speed-placeholder">100</span>𝑐</span>
</div>
<svg class="viz-canvas" id="svg-frame-b"></svg>
<script type="text/javascript">"use strict";const C=299792458;function isIterable(e){return null!=e&&"function"==typeof e[Symbol.iterator]}function applyDatum(e,{transition:t}={}){const a=d3.select(this).datum(e);void 0!==e.class&&a.classed(e.class,!0);const s=void 0===t?a:a.transition(t);Object.entries(e.attrs).forEach(([e,t])=>{s.attr(e,t)}),void 0!==e.text&&s.text(e.text)}function _addGraphicalObjs(e,t){return e.selectAll().data(t).enter().append(e=>d3.create(`svg:${e.shape}`).node()).each(applyDatum)}function applyGraphicalObjs(e,t,{selector:a,cssClass:s,transition:n}={}){const i=e.selectAll(a).data(t).join(e=>e.append(e=>d3.create(`svg:${e.shape}`).node())).each(function(e){applyDatum.call(this,e,{transition:n})});return void 0!==s&&i.classed(s,!0),i}function lorentzFactor({fracOfC:e}){return e||(e=0),1/Math.sqrt(1-e*e)}function sign(e,t){return void 0===t&&(t=1e-6),e<-t?-1:e<t?0:1}function l2Norm(...e){const t=e.reduce((e,t)=>e+t*t,0);return Math.sqrt(t)}const RANGES={x:{min:-11,max:11},y:{min:0,max:1}};Object.values(RANGES).forEach(e=>{e.mid=(e.max+e.min)/2,e.span=e.max-e.min});const speedSlider=document.getElementById("input-speed"),frameButtons={},speedPlaceholders={},speedSpans={},movingTextSpans={};["a","b"].forEach(e=>{frameButtons[e]=document.getElementById(`input-ref-frame-${e}`),speedPlaceholders[e]=document.getElementsByClassName(`frame-${e}-speed-placeholder`),speedSpans[e]=document.getElementById(`frame-${e}-speed`),movingTextSpans[e]=document.getElementById(`frame-${e}-moving-text`)});const AXIS_MARGINS={top:.05,bottom:.15,left:.05,right:.05},CANVAS_HEIGHT=150,CANVAS_WIDTH=800,AX_BOUNDS={xMin:800*AXIS_MARGINS.left,xMax:800*(1-AXIS_MARGINS.right),yMin:150*(1-AXIS_MARGINS.bottom),yMax:150*AXIS_MARGINS.top},highlightFGColor="#5df",canvases=d3.selectAll(".viz-canvas").attr("width",800).attr("height",150).attr("background-color","black"),ARROWHEAD_ID="marker-arrowhead";(()=>{const e={attrs:{refX:4,refY:2.5,markerUnits:"strokeWidth",markerWidth:7,markerHeight:5,orient:"auto"}},t={attrs:{d:"M 1 1 L 5 2.5 L 1 4 L 2 2.5 z","stroke-linejoin":"miter",stroke:"#5df",fill:"#5df"}};canvases.append("svg:defs").append("svg:marker").attr("id",ARROWHEAD_ID).each(function(){applyDatum.call(this,e)}).append("svg:path").each(function(){applyDatum.call(this,t)})})();const subcanvases=canvases.selectAll("g").data((e,t)=>[{originX:0,originY:0,width:800,height:150,isTopFrame:0===t}]).join("g").attr("transform",e=>`translate(0, ${e.originY})`).classed("subcanvas",!0),xScale=d3.scaleLinear().domain([RANGES.x.min,RANGES.x.max]).range([AX_BOUNDS.xMin,AX_BOUNDS.xMax]),yScale=d3.scaleLinear().domain([RANGES.y.min,RANGES.y.max]).range([AX_BOUNDS.yMin,AX_BOUNDS.yMax]),widthScale=d3.scaleLinear().domain([0,RANGES.x.span]).range([0,AX_BOUNDS.xMax-AX_BOUNDS.xMin]),heightScale=d3.scaleLinear().domain([0,RANGES.y.span]).range([0,AX_BOUNDS.yMin-AX_BOUNDS.yMax]);function getTimeDelta({dx:e,fracOfC:t}){return lorentzFactor({fracOfC:t})*e*t}function getTextClassName(e){return`text-frame-${e}`}function getArrowClassName(e){return`arrow-frame-${e}`}function getGraphData(e){const t=yScale(0),a=e.isTopFrame?"a":"b";return[...function(){const e=[],s=[],n=[];return xScale.ticks(RANGES.x.span/2).forEach(i=>{e.push({shape:"rect",class:"box",attrs:{x:xScale(i-.9),y:yScale(.55),width:widthScale(1.8),height:heightScale(.25),stroke:"white","stroke-width":2,fill:"#5c4e29"}});const r=xScale(i);s.push({shape:"line",class:"box-line",attrs:{x1:r,y1:t,x2:r,y2:yScale(.3),stroke:"white","stroke-width":2}}),n.push({shape:"text",class:getTextClassName(a),text:"10:00",x:i,attrs:{x:r,y:yScale(.425),"font-size":18,fill:"#5f5","text-anchor":"middle","alignment-baseline":"middle"}})}),[...e,...s,...n]}(),{shape:"line",class:getArrowClassName(a),attrs:{x1:xScale(6*(e.isTopFrame?1:-1)),y1:yScale(.75),x2:xScale(2),y2:yScale(.75),opacity:0,stroke:"#5df","stroke-width":5,"marker-end":`url(#${ARROWHEAD_ID})`}},...function(){const[e,a]=xScale.domain().map(xScale);return[{class:"x-axis",shape:"line",attrs:{x1:e,y1:t,x2:a,y2:t,stroke:"#999","stroke-width":1}},...xScale.ticks(RANGES.x.span).map(e=>{const a=xScale(e);return{class:"x-axis-tick",shape:"line",attrs:{x1:a,y1:t,x2:a,y2:yScale(.03),stroke:"#999","stroke-width":1}}}),...xScale.ticks(5).map(e=>({class:"x-axis-label",shape:"text",text:`${e}`,attrs:{x:xScale(e),y:yScale(-AXIS_MARGINS.bottom/2),fill:"#999","font-size":12,"text-anchor":"middle","alignment-baseline":"middle"}}))]}()]}function timeToStr(e,t){t=Math.round(t);const a=Math.floor(t/60),s=t-60*a;return`${(e+a).toFixed(0).padStart(2,"0")}:${s.toFixed(0).padStart(2,"0")}`}function updateClocks({fracOfC:e,referenceFrame:t}={}){void 0===e&&(e=speedSlider.value),e=+e,void 0===t&&(t=frameButtons.a.checked?"a":"b");const a="a"===t,s=a?["a","b"]:["b","a"],n=s.map(getArrowClassName),i=s.map(getTextClassName),[r,o]=n.map(e=>d3.selectAll(`.${e}`)),[l,c]=i.map(e=>d3.selectAll(`.${e}`));r.attr("opacity",0);const d=6.5+4*e;o.attr("x2",xScale((a?-1:1)*d)).attr("opacity",1),l.each(function(){d3.select(this).text(timeToStr(10,0))});const p=a?1:-1;c.each(function(t){const a=getTimeDelta({dx:t.x,fracOfC:p*e});d3.select(this).text(timeToStr(10,a))});const m=e.toFixed(2),x=a?speedPlaceholders.b:speedPlaceholders.a;for(let e=0;e<x.length;++e){x[e].textContent=m}a?(speedSpans.a.style.visibility="hidden",speedSpans.b.style.visibility="visible",movingTextSpans.a.textContent="At Rest",movingTextSpans.b.textContent="Moving"):(speedSpans.a.style.visibility="visible",speedSpans.b.style.visibility="hidden",movingTextSpans.a.textContent="Moving",movingTextSpans.b.textContent="At Rest")}subcanvases.each(function(e){applyGraphicalObjs(d3.select(this),()=>getGraphData(e))}),updateClocks();</script></body>
</html>